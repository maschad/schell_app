<ion-view  style="background-color:white;">
  <ion-nav-title>{{title}}</ion-nav-title>
  <!-- Breadcrumb ionic -->
  <ion-nav-buttons side="right" class="has-header">
    <button class="button icon ion-chevron-down" ng-click="popover.show($event)"></button>
  </ion-nav-buttons>
  <!-- Menu -->
  <div class="side-nav-wrapper">
    <ul class="side-nav hidden-xs">
      <li>
        <div ng-class="productDownloaded ? 'side-nav-downloaded':'side-nav-download' "
             ng-click="downloadProduct()"></div>
      </li>
      <li class="dropdown">
        <div class="dropdown-toggle side-nav-clip" ng-click="bookmark()">
          <span ng-show="bookmarked.length > 0" class="badge badge-assertive">{{bookmarked.length}}</span>
        </div>
      </li>
      <li>
        <div class="side-nav-mail" ng-click="sendEmail()">
        </div>
      </li>
      <li>
        <a ng-href="#/start-screen">
          <div class="side-nav-home">
          </div>
        </a>
      </li>
    </ul>

    <ul class="menu-wrapper visible-xs-block">
      <li>
        <a ng-href="#/start-screen">
          <div class="side-nav-home-sm schellicon-home">
          </div>
        </a>
      </li>
      <li>
        <div class="side-nav-mail-sm schellicon-mail" ng-click="sendEmail()">
        </div>
      </li>
      <li>
        <div class="bookmark-popup side-nav-clip-sm schellicon-paper-clip" ng-click="bookmark()">
          <span ng-show="bookmarked.length > 0" class="badge badge-assertive">{{bookmarked.length}}</span>
        </div>
      </li>
      <li>
        <div
          ng-class="productDownloaded ? 'side-nav-downloaded-sm schellicon-download' : 'side-nav-download-sm schellicon-download'"
          ng-click="downloadProduct()"></div>
      </li>
    </ul>
  </div>

  <ion-content padding="false" class="has-header">
    <!-- For refreshing items -->
    <ion-refresher pulling-icon="ion-arrow-down-b" on-refresh="refreshItems()">
    </ion-refresher>

    <div class="row responsive-sm marg-top-30">
      <div class="col col-40">
        <img ng-src="{{details.image_landscape}}" class="product-img">
      </div>
      <div id="detailPage-markdown3" class="col">
        <p id="detailPage-heading4" class="product-order-number">Bestellnummer: {{details.nummer}}</p>
        <p id="detailPage-heading3" class="product-name"> {{details.produktbezeichnung_de}} </p>
        <div class="product-summary" ng-bind-html="details.beschreibung_de"></div>
        <p class="product-noted"> {{details.zusatz2_de}}</p>
        <ion-list>
          <div ng-repeat="list in listData">
            <ion-item class="description-item" ng-click="toggleGroup(list)"
                      ng-class="{active: isGroupShown(list)}">
              <div class="item-icon-right">
                {{list.title}}
                <i class="icon" ng-class="isGroupShown(list) ? 'ion-chevron-up' : 'ion-chevron-down'"></i>
              </div>
            </ion-item>
            <ion-item class="description-accordion" ng-show="isGroupShown(list)">
              <div ng-if="list.title.includes('ZEICHNUNG')">
                <img ng-src="{{details.technical_drawing_link}}" style="max-width: 100%; max-height: 100%;">
              </div>
              <div ng-if="list.title == 'LIEFERUMFANG'">
                <div ng-bind-html="details.lieferumfang_de" class="wrap"></div>
              </div>
              <div ng-if="list.title == 'EINSATZBEREICH / TECHNISCHE DATEN'">
                <div ng-bind-html="details.einsatzbereich_de" class="wrap"></div>
              </div>
              <div ng-if="list.title == 'DETAILS'">
                <div ng-bind-html="details.werkstoff_de" class="wrap"></div>
              </div>
              <div ng-if="list.title == 'DOWNLOADS' && details.download_ids">
                <div ng-repeat="file in files">
                  <div class="row">
                    <div class="col col-20">
                      <img ng-src="{{file.thumbnail}}" width="70%" style="border: 1px solid #000;"
                           ng-click="downloadPDF(file)"><!-- #TODO: put in download button -->
                    </div>
                  </div>
                </div>
              </div>
              <div ng-if="list.title == 'EMPFOHLENE ZUGEHÃ–RIGE ARTIKEL'">
                <div ng-repeat="file in files">
                  <p class="wrap"> {{file.zusatzinformation_de}} </p>
                </div>
              </div>
              <div ng-if="list.title == 'VARIANTEN'">
                <div class="wrap" ng-bind-html="details.differenzierung_de"></div>
              </div>

              <div ng-if="list.title == 'VIDEO'">
                <div ng-show="videos">
                  <div ng-repeat="video in videos">
                    <div class="col">
                      <video width="100%" height="100%" controls poster="{{video.startimage_de}}">
                        <source src="{{trustSrc(video.videofile_de)}}">
                      </video>
                    </div>
                  </div>
                </div>
              </div>
            </ion-item>
          </div>
        </ion-list>
        <div class="design-awards">
          <img src="img/design-awards.png">
        </div>
      </div>
    </div>

  </ion-content>
</ion-view>
